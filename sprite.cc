#include "sprite.h"
#include <string.h>

#define SPRITE_DEST ((uint8_t*)0x2000)

const uint8_t ball_sprite[64] = {
    0x00, 0x7e, 0x00, 0x03, 0xff, 0xc0, 0x07, 0xff, 0xe0, 0x0f, 0xff, 0xf0,
    0x1f, 0xff, 0xf8, 0x1f, 0xff, 0xf8, 0x3f, 0xff, 0xfc, 0x3f, 0xff, 0xfc,
    0x3f, 0xff, 0xfc, 0x3f, 0xff, 0xfc, 0x3f, 0xff, 0xfc, 0x1f, 0xff, 0xf8,
    0x1f, 0xff, 0xf8, 0x0f, 0xff, 0xf0, 0x07, 0xff, 0xe0, 0x03, 0xff, 0xc0,
    0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00 
};

void initSprite0() {
    // Fast bulk copy to VIC memory
    memcpy(SPRITE_DEST, ball_sprite, 64);
    
    // Pointer is Address / 64 (0x2000 / 64 = 128)
    SPRITE_POINTERS[0] = 0x80;

    SPRITE_0_X = 160; 
    SPRITE_0_Y = 120;
    SPRITE_MSB_X = 0; 
    SPRITE_COLOR_0 = 1; // White
    SPRITE_ENABLE = 0x01; 
}

void moveSprite(int8_t dx, int8_t dy) {
    SPRITE_0_X += dx;
    SPRITE_0_Y += dy;
}
